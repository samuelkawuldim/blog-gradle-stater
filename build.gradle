/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 */

plugins {
  id 'java'
  id 'com.github.node-gradle.node' version '3.2.0'
}

node {
  version = '14.17.0' // Specify the desired Node.js version
  npmVersion = '7.12.0' // Specify the desired npm version
  download = true
}

dependencies {
  implementation 'com.facebook.react:react:17.0.2'
  implementation 'com.facebook.react:react-dom:17.0.2'
  testImplementation 'org.mockito:mockito-core:3.12.4' // Example testing dependency
  // Add more testing dependencies as needed
}

task myNpmInstall(type: NpmTask) {
  dependsOn npmSetup
  args = ['install']
}

task buildReact(type: NpmTask) {
  dependsOn myNpmInstall
  args = ['run', 'build']
}

task runTests(type: NpmTask) {
  dependsOn myNpmInstall
  args = ['test']
}

task startReact(type: NpmTask) {
  dependsOn myNpmInstall
  args = ['start']
}

test {
  dependsOn runTests
}

build.dependsOn buildReact
